{% extends "home/base.html" %}
{% load crispy_forms_tags %}

<!-- main block code -->
{% block content %}

<style>
    .top-div {
        margin-top: 50px;
    }

    .test-border {
        border: 2px solid rgb(255, 0, 0);
    }

    .update-card {
        margin: 20px;
        border: 2px solid black;
    }

    .update-card-title {
        background-color: blue;
        text-align: center;
    }

    .info-colour {
        background-color: aqua;
    }

    img {
        width: 20vw
    }

</style>

<div class="container-fluid top-div">
    <div class="row">
        <div class="col-12 col-lg-8 test-border info-colour">
            <div class="update-card">
                <div class="update-card-title">
                    <h1 class="m-0 p-1">{{ update.title }}</h1>
                </div>
                <div><strong>TOPIC: </strong>{{ update.topic }}</div>
                <div><strong>TITLE: </strong>{{ update.title }}</div>
                <div><strong>CONTENT: </strong>{{ update.content }}</div>
                {% if update.update_image %}
                    <div><strong>COMMENT IMAGE: </strong><img src="{{ update.update_image.url }}" alt=""></div>
                {% endif %}
                <div><strong>PUBLISHED ON: </strong>{{ update.published_on|date:"dS F Y (P)" }}</div>
                {% if update.updated_on %}
                    <div><strong>UPDATED ON: </strong>{{ update.updated_on|date:"dS F Y (P)" }}</div>
                {% endif %}
            </div>
        </div>
    
        <div class="col test-border">
            <div class="content-section">
                <form method="POST">
                    {% csrf_token %}
                    <fieldset class="form-group">
                        <legend class="border-bottom mb-4">Add Comment</legend>
                        {{ comment_form|crispy }}
                    </fieldset>
                    <div class="form-group">
                        <button class="btn btn-outline-info" type="submit">Submit Comment</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

</div>

<hr>
<h3>COMMENTS</h3>
{% for comment in comments %}
    <div><strong>TITLE: </strong>{{ comment.title }}</div>
    <div><strong>COMMENT: </strong>{{ comment.comment }}</div>
    {% if comment.update_on %}
        <div><strong>COMMENT IMAGE: </strong>{{ comment.comment_image }}</div>
    {% endif %}

    {% if comment.action_taken %}
        <div><strong>ACTION TAKEN: </strong>{{ comment.action_taken }}</div>
    {% endif %}

    {% if comment.action_image %}
        <div><strong>ACTION IMAGE: </strong>{{ comment.action_image }}</div>
    {% endif %}

    {% if comment.created_on %}
        <div><strong>CREATED ON: </strong>{{ comment.created_on|date:"dS F Y (P)" }}</div>
    {% endif %}

    {% if comment.updated_on %}
        <div><strong>UPDATED: </strong>{{ comment.updated_on|timesince }} ago</div>
    {% endif %}

    {% if comment.comment_status == 1 %}
        <div><strong>COMMENT STATUS: </strong>closed</div>
    {% else %}
        <div><strong>COMMENT STATUS: </strong>open</div>
    {% endif %}

    <br>
    {% if user == comment.author %}
        <a class="btn btn-success" href="{% url 'comment-update' comment.pk %}">Update Comment</a>
        <a class="btn btn-danger" href="{% url 'comment-delete' comment.pk %}">Delete</a>
    {% endif %}
    <hr>

{% endfor %}


{% endblock %}